<div class="container">
  <h3>Register</h3>
  <form [formGroup]="registerForm" (ngSubmit)="register()" novalidate>
    <div class="form-group" [ngClass]="{'has-danger': registerForm.get('username').dirty && registerForm.get('username').invalid}">
      <label for="username">Username</label>
      <input type="text" class="form-control" id="username" formControlName="username" />
      <em *ngIf="registerForm.get('username').dirty && registerForm.get('username').invalid" class="form-control-feedback">Username Required</em>
    </div>
    <div class="form-group" [ngClass]="{'has-danger': registerForm.get('emailAdress').dirty && registerForm.get('emailAdress').invalid}">
      <label for="emailAdress">Email Address</label>
      <input type="email" class="form-control" id="emailAdress" formControlName="emailAdress" />
      <em *ngIf="registerForm.get('emailAdress').dirty && registerForm.get('emailAdress').invalid" class="form-control-feedback">Valid Email Address Required</em>
    </div>
    <div formGroupName="passwordGroup" [ngClass]="{'has-danger': registerForm.get('passwordGroup').errors}">
      <div class="form-group" [ngClass]="{'has-danger': registerForm.get('passwordGroup.password').dirty && registerForm.get('passwordGroup.password').invalid}">
        <label for="password">Password</label>
        <input type="password" class="form-control" id="password" formControlName="password" />
        <em *ngIf="registerForm.get('passwordGroup.password').dirty && registerForm.get('passwordGroup.password').invalid" class="form-control-feedback">Password Required</em>
      </div>
      <div class="form-group" [ngClass]="{'has-danger': registerForm.get('passwordGroup.confirmPassword').dirty && registerForm.get('passwordGroup.confirmPassword').invalid}">
        <label for="confirmPassword">Confirm Password</label>
        <input type="password" class="form-control" id="confirmPassword" formControlName="confirmPassword" />
        <span *ngIf="(registerForm.get('passwordGroup.confirmPassword').touched && 
                      registerForm.get('passwordGroup.confirmPassword').dirty) &&
                      (registerForm.get('passwordGroup.confirmPassword').errors ||
                      registerForm.get('passwordGroup').errors)">
          <em *ngIf="registerForm.get('passwordGroup.confirmPassword').errors?.required" class="form-control-feedback">Confirm Password Required</em>
          <em *ngIf="registerForm.get('passwordGroup').errors?.pwdMatch" class="form-control-feedback">Passwords do not match</em>              
        </span>
      </div>
    </div>
    <button [disabled]="(registerForm.dirty && registerForm.invalid) || registerForm.pristine || registerForm.untouched" type="submit"
      class="btn btn-primary">Register</button>
  </form>
</div>